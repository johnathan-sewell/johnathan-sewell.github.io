"use strict";(self.webpackChunkjohnathan_sewell=self.webpackChunkjohnathan_sewell||[]).push([[983],{7856:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});var o=t(3274),r=t(4824);const s={slug:"using-intersection-observer-scroll-shadows",title:"Using Intersection Observer to Create Scroll Shadows",authors:"johnathan"},l=void 0,i={permalink:"/using-intersection-observer-scroll-shadows",source:"@site/blog/2024-02-09-using-intersection-observer-scroll-shadows/index.md",title:"Using Intersection Observer to Create Scroll Shadows",description:"Using the Intersection Observer API to create scroll shadows.",date:"2024-02-09T00:00:00.000Z",formattedDate:"February 9, 2024",tags:[],readingTime:2.045,hasTruncateMarker:!0,authors:[{name:"Johnathan Sewell",url:"https://github.com/johnathan-sewell",imageURL:"https://avatars.githubusercontent.com/u/286782?v=4",key:"johnathan"}],frontMatter:{slug:"using-intersection-observer-scroll-shadows",title:"Using Intersection Observer to Create Scroll Shadows",authors:"johnathan"},unlisted:!1,prevItem:{title:"Logging in the Frontend API layer",permalink:"/logging-frontend-api-layer"},nextItem:{title:"React Compound Component Pattern",permalink:"/compound-component"}},c={authorsImageUrls:[void 0]},a=[{value:"Intersection Observer",id:"intersection-observer",level:4},{value:"A Component with Scroll Shadows",id:"a-component-with-scroll-shadows",level:4}];function d(e){const n={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Using the Intersection Observer API to create scroll shadows."}),"\n",(0,o.jsx)(n.h4,{id:"intersection-observer",children:"Intersection Observer"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API",children:"Intersection Observer API"})," provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element."]}),"\n",(0,o.jsx)(n.h4,{id:"a-component-with-scroll-shadows",children:"A Component with Scroll Shadows"}),"\n",(0,o.jsx)(n.p,{children:"Here's a simple scrollable component."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'export function Timeline() {\n  return (\n    <>\n      <div className="relative">\n        <div className="timeline-hidden-scrollbars relative flex gap-[6px] overflow-x-auto rounded-[3px] border border-solid border-timeline-border bg-timeline-background-100 p-1">\n          {Array.from({ length: 15 }).map((_, index) => (\n            <div\n              key={index}\n              className="h-[30px] min-w-[30px] rounded-[2px] bg-yellow-300"\n            ></div>\n          ))}\n        </div>\n      </div>\n    </>\n  );\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Link to video: ",(0,o.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(3193).A+"",children:"Simple component without scroll shadows"})]}),"\n",(0,o.jsx)(n.p,{children:"And with the Intersection Observer API we can create a shadow effect when the component is scrolled."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { useScrollObservers } from "./hooks/useScrollObservers";\n\nconst ScrollShadowLeft = () => (\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="35"\n    height="36"\n    viewBox="0 0 35 36"\n    className="absolute left-px z-10 h-full min-w-[30px]"\n  >\n    <path d="M0 36L35 36L35 0L0 0L0 36Z" fill="url(#g0)" />\n    <defs>\n      <linearGradient\n        id="g0"\n        x1="0"\n        y1="13.9592"\n        x2="35"\n        y2="13.9592"\n        gradientUnits="userSpaceOnUse"\n      >\n        <stop offset="0.109375" stopColor="#1F0C19" />\n        <stop offset="0.494792" stopColor="#1F0C19" stopOpacity="0.9" />\n        <stop offset="1" stopColor="#1F0C19" stopOpacity="0" />\n      </linearGradient>\n    </defs>\n  </svg>\n);\n\nconst ScrollShadowRight = () => (\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="35"\n    height="36"\n    viewBox="0 0 35 36"\n    className="absolute right-px top-0 z-10 h-full min-w-[30px] rotate-180"\n  >\n    <path d="M0 36L35 36L35 0L0 0L0 36Z" fill="url(#g1)" />\n    <defs>\n      <linearGradient\n        id="g1"\n        x1="0"\n        y1="13.9592"\n        x2="35"\n        y2="13.9592"\n        gradientUnits="userSpaceOnUse"\n      >\n        <stop offset="0.109375" stopColor="#1F0C19" />\n        <stop offset="0.494792" stopColor="#1F0C19" stopOpacity="0.9" />\n        <stop offset="1" stopColor="#1F0C19" stopOpacity="0" />\n      </linearGradient>\n    </defs>\n  </svg>\n);\n\nexport function Timeline() {\n  const {\n    rootRef,\n    leftScrollRef,\n    rightScrollRef,\n    isScrolledLeft,\n    isScrolledRight,\n  } = useScrollObservers();\n\n  return (\n    // intersection parent\n    <div className={"relative"} ref={rootRef}>\n      {isScrolledLeft && <ScrollShadowLeft />}\n\n      <div className="timeline-hidden-scrollbars relative flex gap-[6px] overflow-x-auto rounded-[3px] border border-solid border-timeline-border bg-timeline-background-100 p-1">\n        {/* intersection element */}\n        <div className="-ml-1 h-[30px]" ref={leftScrollRef}></div>\n\n        {Array.from({ length: 15 }).map((_, index) => (\n          <div\n            key={index}\n            className="h-[30px] min-w-[30px] rounded-[2px] bg-yellow-300"\n          ></div>\n        ))}\n\n        {/* intersection element */}\n        <div className="-mr-1 h-[30px]" ref={rightScrollRef}></div>\n      </div>\n\n      {isScrolledRight && <ScrollShadowRight />}\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"And the useScrollObservers hook..."}),"\n",(0,o.jsxs)(n.p,{children:["I'm using the ",(0,o.jsx)(n.a,{href:"https://usehooks-ts.com/react-hook/use-intersection-observer",children:"usehooks-ts"})," library for the useIntersectionObserver hook."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { useRef } from "react";\nimport { useIntersectionObserver } from "usehooks-ts";\n\nexport const useScrollObservers = () => {\n  const leftScrollRef = useRef<HTMLDivElement>(null);\n  const rightScrollRef = useRef<HTMLDivElement>(null);\n  const rootRef = useRef<HTMLDivElement>(null);\n\n  const leftScrollEntry = useIntersectionObserver(leftScrollRef, {\n    root: rootRef.current,\n  });\n  const rightScrollEntry = useIntersectionObserver(rightScrollRef, {\n    root: rootRef.current,\n  });\n\n  const isScrolledLeft =\n    leftScrollEntry && leftScrollEntry.intersectionRatio < 1;\n  const isScrolledRight =\n    rightScrollEntry && rightScrollEntry.intersectionRatio < 1;\n\n  return {\n    rootRef,\n    leftScrollRef,\n    rightScrollRef,\n    isScrolledLeft,\n    isScrolledRight,\n  };\n};\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Link to video: ",(0,o.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(9772).A+"",children:"Component with scroll shadows"})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},3193:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/files/1-07d56f50c8b2473a5580b3951dabebdf.webm"},9772:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/files/2-06a3089a4ad9f3e3171064bfd318f113.webm"},4824:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>i});var o=t(9474);const r={},s=o.createContext(r);function l(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);